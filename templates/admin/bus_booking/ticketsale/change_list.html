{% extends "admin/change_list.html" %}
{% load i18n %}

{% block content %}
  <div style="margin-bottom:1.5em; padding:.5em; border:1px solid #ccc;">
    <h2>{% trans "Revenue Summary" %}</h2>

    <h3>{% trans "Daily Revenue (Last 7 Days)" %}</h3>
    <form method="get" style="margin-bottom: 1em; padding: 1em; border: 1px solid #ccc; background: #f9f9f9;">
      <label for="start_date">{% trans "Start Date" %}:</label>
      <input type="date" id="start_date" name="start_date" value="{{ request.GET.start_date }}">
    
      <label for="end_date" style="margin-left: 1em;">{% trans "End Date" %}:</label>
      <input type="date" id="end_date" name="end_date" value="{{ request.GET.end_date }}">
    
      <input type="submit" value="{% trans 'Filter' %}" style="margin-left: 1em;">
    </form>
    
    <table style="width:100%; text-align:left;">
      <thead>
        <tr>
          <th>{% trans "Date" %}</th>
          <th>{% trans "Revenue" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for item in daily_revenue %}
          <tr>
            <td>{{ item.date }}</td>
            <td>{{ item.revenue }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="2">{% trans "No data" %}</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <h3>{% trans "Total Revenue Summary" %}</h3>
    <ul>
      <li><strong>{% trans "Weekly Total:" %}</strong> {{ weekly_total }}</li>
      <li><strong>{% trans "Monthly Total:" %}</strong> {{ monthly_total }}</li>
      <li><strong>{% trans "Yearly Total:" %}</strong> {{ yearly_total }}</li>
    </ul>
  </div>

  {{ block.super }}
{% endblock %}
